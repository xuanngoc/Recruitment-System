<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{fragments/home-layout}">
<head>
    <title>EZ Jobs | ApplyCV </title>
</head>
<body>
<div layout:fragment="content" th:remove="tag" id="content">
		<div class="bg-light vh-100">
    	<div class="container" >
      	<div class="row">
      	<div class="col-3"></div>
       	 <div class="col-6">
        	  <form class="" th:action=@{apply} method="POST"  enctype="multipart/form-data" onsubmit="return onCheckValidation()">
        	  	<h2 class="text-center" style="color: #30336b; margin-top:55px" th:text="${title}">  </h2>  		  
             	<div class="form-group mt-5" >
             	
    			     <p th:text="${message}" th:if="${message ne null}" class="alert alert-primary"></p> 
    			     <div sec:authorize="isAuthenticated()">
    			     	<label>CV của bạn:</label>
    			     	<span id="authenticated" class="ml-3 text-success" th:text="${path_file_cv}"></span>
    			     	<a class="btn btn-info" target="_blank" th:href="@{#}">Xem CV</a>
    			     	<br>
    			     	<input type="file" class="form-control-file mt-5" accept=".pdf" name="path_file_cv" 
             		 		onchange="showUp()" id="file" th:value="${path_file_cv}" style="display: none;" > 
             		 	<label id="selectFile" class="btn btn-primary mt-5" for="file">Chọn lại CV</label>
    			     </div>
    			     <div sec:authorize="isAnonymous()">
    			     	<input type="file" class="form-control-file mt-5" accept=".pdf" name="path_file_cv" 
             		 		onchange="showUp()" id="file1" th:value="${path_file_cv}" style="display: none;" > 
             		 	<label id="selectFile" class="btn btn-primary mt-5" for="file1">Chọn CV</label>
    			     </div>
    			      		  
             		 
             	</div> 	 
				<input class="col-8 offset-2 btn btn-primary" th:href="@{sendCVsuccess}" type="submit" value="Gửi yêu cầu ứng tuyển" >
        	  </form>
        	 
     	  	 </div>
     	  	 <script type="text/javascript">
	     	  	const showUp = () => {
	 	  	 		document.getElementById('file').style.display = 'inline';
	 	  	 		document.getElementById('file1').style.display = 'inline';
	 	  	 	}
     	  	 
     	  	 	if(document.getElementById('file1').files.length == 0) {
     	  	 		document.getElementById('selectFile').innerHTML = 'Chọn CV';
     	  	 	} else {
     	  	 		document.getElementById('file1').style.display = 'inline';
     	  	 	}
     	  	 	
     	  	 	const onCheckValidation = ()  => {
     	  	 		if (document.getElementById('file1').files.length == 0) {
     	  	 			alert("Bắt buộc chọn file CV trước khi gửi.");
     	  	 			return false;
     	  	 		}
     	  	 		return true;
     	  	 	}
     	  	 </script>
    	  </div>
    	</div>
       	</div>
</div>



</body>
</html>